apiVersion: lazyfwd/v1

# Verbose logging (can also use --verbose flag with higher priority)
# verbose: false

# Auto-reload on file changes. Any changes need `brew services restart lazyfwd` while it is false.
auto_reload_config: true

# Additional paths for exec credential plugins (e.g., aws-iam-authenticator, gcloud)
# Common paths (/usr/local/bin, /opt/homebrew/bin, etc.) are added automatically.
# Add custom paths here if your credential plugin is in a non-standard location.
# exec_path:
#   - /custom/path/to/binaries

http:
  # Listen address - handles both HTTP and HTTPS (TLS passthrough) on same port
  listen: ":8989"  # Port changes require: brew services restart lazyfwd

  # Idle timeout before closing tunnels (Go duration format)
  # After this duration of no traffic, the tunnel will be closed
  idle_timeout: 60m

  k8s:
    # Path(s) to kubeconfig. Supports colon-separated paths like $KUBECONFIG.
    # If not set: uses $KUBECONFIG env var, or defaults to ~/.kube/config
    # Note: $KUBECONFIG is NOT available when running as brew service (launchd limitation)
    # kubeconfig: ~/.kube/config
    # kubeconfig: ~/.kube/config:~/.kube/prod-config

    routes:
      # # https://argocd.localhost:8989 (also supports http http://argocd.localhost:8989)
      # argocd.localhost:
      #   context: my-cluster-context # Kubernetes context name from kubeconfig
      #   namespace: argocd           # Kubernetes namespace
      #   service: argocd-server      # Kubernetes service name
      #   port: 443                   # Service port (automatically resolves to container targetPort)
      #   scheme: https               # Set X-Forwarded-Proto header (use "https" to prevent HTTPS redirects)

      # # http://grafana.localhost:8989
      # grafana.localhost:
      #   context: my-cluster-context
      #   namespace: monitoring
      #   service: grafana
      #   port: 3000
      #   scheme: http               # Default is "http", no need to specify

      # http://debug.localhost:8989
      # debug.localhost:
      #   context: microk8s
      #   namespace: default
      #   pod: my-debug-pod         # Pod name (use instead of service)
      #   port: 8080
